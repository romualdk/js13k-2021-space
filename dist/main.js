(()=>{"use strict";function t(t,n,o){var i=t.createShader(o);return t.shaderSource(i,n),t.compileShader(i),i}let n=[0,0,0,255,0,0,0,255,0,0,0,255,255,255,0,0,255,255,255,0,255,255,255,255];const o=t=>t*Math.PI/180;function i(t,n){var o=t[0],i=t[1],r=t[2],e=t[3],a=t[4],v=t[5],c=t[6],d=t[7],f=t[8],l=t[9],u=t[10],s=t[11],h=t[12],A=t[13],_=t[14],R=t[15],g=n[0],E=n[1],m=n[2],F=n[3],b=n[4],M=n[5],T=n[6],B=n[7],x=n[8],S=n[9],P=n[10],p=n[11],w=n[12],U=n[13],y=n[14],C=n[15];return[g*o+E*a+m*f+F*h,g*i+E*v+m*l+F*A,g*r+E*c+m*u+F*_,g*e+E*d+m*s+F*R,b*o+M*a+T*f+B*h,b*i+M*v+T*l+B*A,b*r+M*c+T*u+B*_,b*e+M*d+T*s+B*R,x*o+S*a+P*f+p*h,x*i+S*v+P*l+p*A,x*r+S*c+P*u+p*_,x*e+S*d+P*s+p*R,w*o+U*a+y*f+C*h,w*i+U*v+y*l+C*A,w*r+U*c+y*u+C*_,w*e+U*d+y*s+C*R]}function r(t){var n=Math.cos(t),o=Math.sin(t);return[n,o,0,0,-o,n,0,0,0,0,1,0,0,0,0,1]}function e(t,n,o,r){return i(t,function(t,n,o){return[1,0,0,0,0,1,0,0,0,0,1,0,t,n,o,1]}(n,o,r))}function a(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function v(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return n>1e-5?[t[0]/n,t[1]/n,t[2]/n]:[0,0,0]}let d=c.getContext("webgl2"),f=t(d,"#version 300 es\nin vec4 a_position;\nin vec4 a_color;\nuniform mat4 u_matrix;\nout vec4 v_color;\n\nvoid main() {\n  gl_Position = u_matrix * a_position;\n  v_color = a_color;\n}\n",d.VERTEX_SHADER),l=t(d,"#version 300 es\nprecision highp float;\nin vec4 v_color;\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}\n",d.FRAGMENT_SHADER),u=function(t,n,o){var i=t.createProgram();return t.attachShader(i,n),t.attachShader(i,o),t.linkProgram(i),i}(d,f,l),s=d.getAttribLocation(u,"a_position"),h=d.getAttribLocation(u,"a_color"),A=d.getUniformLocation(u,"u_matrix"),_=d.createVertexArray();d.bindVertexArray(_),d.enableVertexAttribArray(s);let R=function(t){let n={v:t.v.split(/\s+/),f:t.f.split(/\s+/)};for(let t in n.v)n.v[t]*=1;for(let t in n.f)n.f[t]*=1,n.f[t]-=1;return n}({v:"3 2 2\n0 3 0\n0 0 1\n0 4 6\n6 1 0\n5 2 8\n0 1 15\n0 2 15\n1 1 15",f:"9 5 6\n6 8 9\n9 3 5\n3 1 5\n4 1 2\n3 2 1\n8 7 9\n9 7 3\n4 6 1\n4 8 6\n6 5 1"}),g=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,g),function(t,n){let o=function(t,n=1){let o=function(t){let n={v:[...t.v],f:[...t.f]},o=n.v.length/3;for(let t=0;t<o;t++)n.v[3*t]*=-1;for(let t in n.f)n.f[t]+=o;return n.f=function(t){let n=t.length/3,o=[];for(let i=0;i<n;i++){let n=3*i;o[n]=t[n+2],o[n+1]=t[n+1],o[n+2]=t[n]}return o}(n.f),n}(t);t.v=t.v.concat(o.v),t.f=t.f.concat(o.f);let i=function(t){let n=t.f.length,o=new Float32Array(3*n);for(let i=0;i<n;i++){let n=3*t.f[i];o[3*i]=t.v[n],o[3*i+1]=t.v[n+1],o[3*i+2]=t.v[n+2]}return o}(t);for(var r in i)i[r]*=n;return i}(n,3);t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW)}(d,R),d.vertexAttribPointer(s,3,d.FLOAT,!1,0,0);let E=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,E),function(t,o){t.bufferData(t.ARRAY_BUFFER,function(t){let o=t.f.length,i=new Uint8Array(3*o);for(let t=0;t<o;t++){let o=Math.floor(t/3);i[3*t]=n[o],i[3*t+1]=n[o+1],i[3*t+2]=n[o+2]}return i}(o),t.STATIC_DRAW)}(d,R),d.enableVertexAttribArray(h),d.vertexAttribPointer(h,3,d.UNSIGNED_BYTE,!0,0,0);var m=o(60),F=o(30),b=0;let M=1,T=[],B=[];for(var x=0;x<10;x++)T[x]=0,B[x]=(2+10*Math.random())/10;window.addEventListener("keypress",(function(){M=!M})),requestAnimationFrame((function t(n){var o=(n*=.001)-b;b=n,M&&(F+=1.2*o);var c,f,l,s,h,g,E,x,S,P,p,w,U,y,C,D,I,L,H,V,Y,N,W,q,G,O,k,X,j,z,J,K,Q,Z,$,tt,nt,ot,it,rt,et,at,vt,ct,dt,ft,lt,ut,st,ht,At,_t,Rt,gt;c=d.canvas.clientWidth,f=d.canvas.clientHeight,d.canvas.width===c&&d.canvas.height===f||(d.canvas.width=c,d.canvas.height=f),d.viewport(0,0,d.canvas.width,d.canvas.height),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT),d.enable(d.DEPTH_TEST),d.enable(d.CULL_FACE),d.useProgram(u),d.bindVertexArray(_);for(var Et=d.canvas.clientWidth/d.canvas.clientHeight,mt=function(t,n,o,i){var r=Math.tan(.5*Math.PI-.5*t),e=1/-1999;return[r/n,0,0,0,0,r,0,0,0,0,2001*e,-1,0,0,2e3*e*2,0]}(m,Et),Ft=[200,0,0],bt=function(t){var n=Math.cos(t),o=Math.sin(t);return[n,0,-o,0,0,1,0,0,o,0,n,0,0,0,0,1]}(F),Mt=[(bt=e(bt,0,50,300))[12],bt[13],bt[14]],Tt=i(mt,(s=void 0,h=void 0,g=void 0,E=void 0,x=void 0,g=v([(s=l=Mt)[0]-(h=Ft)[0],s[1]-h[1],s[2]-h[2]]),E=v(a([0,1,0],g)),x=v(a(g,E)),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[(gt=1/((P=(S=bt=[E[0],E[1],E[2],0,x[0],x[1],x[2],0,g[0],g[1],g[2],0,l[0],l[1],l[2],1])[0])*(ht=(O=(V=S[10])*(G=S[15]))*(C=S[5])+(j=(q=S[14])*(I=S[7]))*(H=S[9])+(z=(D=S[6])*(Y=S[11]))*(W=S[13])-((k=q*Y)*C+(X=D*G)*H+(J=V*I)*W))+(y=S[4])*(At=k*(p=S[1])+(K=(w=S[2])*G)*H+($=V*(U=S[3]))*W-(O*p+(Q=q*U)*H+(Z=w*Y)*W))+(L=S[8])*(_t=X*p+Q*C+(tt=w*I)*W-(j*p+K*C+(nt=D*U)*W))+(N=S[12])*(Rt=J*p+Z*C+nt*H-(z*p+$*C+tt*H))))*ht,gt*At,gt*_t,gt*Rt,gt*(k*y+X*L+J*N-(O*y+j*L+z*N)),gt*(O*P+Q*L+Z*N-(k*P+K*L+$*N)),gt*(j*P+K*y+nt*N-(X*P+Q*y+tt*N)),gt*(z*P+$*y+tt*L-(J*P+Z*y+nt*L)),gt*((ot=L*W)*I+(et=N*C)*Y+(at=y*H)*G-((it=N*H)*I+(rt=y*W)*Y+(vt=L*C)*G)),gt*(it*U+(ct=P*W)*Y+(lt=L*p)*G-(ot*U+(dt=N*p)*Y+(ft=P*H)*G)),gt*(rt*U+dt*I+(ut=P*C)*G-(et*U+ct*I+(st=y*p)*G)),gt*(vt*U+ft*I+st*Y-(at*U+lt*I+ut*Y)),gt*(rt*V+vt*q+it*D-(at*q+ot*D+et*V)),gt*(ft*q+ot*w+dt*V-(ct*V+lt*q+it*w)),gt*(ct*D+st*q+et*w-(ut*q+rt*w+dt*D)),gt*(ut*V+at*w+lt*D-(ft*D+st*V+vt*w))])),Bt=0;Bt<10;++Bt){T[Bt]+=B[Bt]*o;var xt=r(T[Bt]),St=Bt*Math.PI*2/10,Pt=e(Tt,200*Math.cos(St),0,200*Math.sin(St));Pt=i(Pt,xt),d.uniformMatrix4fv(A,!1,Pt),d.drawArrays(d.TRIANGLES,0,R.f.length)}requestAnimationFrame(t)}))})();